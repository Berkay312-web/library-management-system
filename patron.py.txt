import json
import os
def load_patrons(path: str) -> list:
    if not os.path.exists(path):
        return []

    with open(path, "r", encoding="utf-8") as file:
        return json.load(file)
def save_patrons(path: str, patrons: list) -> None:
    with open(path, "w", encoding="utf-8") as file:
        json.dump(patrons, file, indent=4, ensure_ascii=False)
def register_patron(patrons: list, patron_data: dict) -> dict:
    patrons.append(patron_data)
    return patron_data
def authenticate_patron(patrons: list, library_id: str, password: str):
    for patron in patrons:
        if patron.get("library_id") == library_id and patron.get("password") == password:
            return patron
    return None
def update_patron_contact(patrons: list, library_id: str, contact_updates: dict) -> dict:
    for patron in patrons:
        if patron.get("library_id") == library_id:
            patron.update(contact_updates)
            return patron
    return {}
